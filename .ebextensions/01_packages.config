# .ebextensions/01_packages.config

commands:
  01_install_epel:
    # AL2023 requires EPEL 9 for Tesseract compatibility.
    # Added --nogpgcheck to prevent the build engine from failing on untrusted metadata.
    command: "sudo dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm --nogpgcheck"
  02_import_gpg_key:
    # Explicitly import the EPEL 9 GPG key to satisfy AL2023 security policies.
    command: "sudo rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-9"
  03_install_tesseract:
    # Explicitly install Tesseract and the English language pack.
    command: "sudo dnf install -y tesseract tesseract-devel tesseract-langpack-eng"

packages:
  yum:
    # Essential build tools for Python dependencies
    gcc: []
    gcc-c++: []
    python3-devel: []
    # PDF and Image processing dependencies (Required for pdf2image/OpenCV)
    poppler-utils: []
    mesa-libGL: []
    libSM: []
    libXrender: []
    libXext: []