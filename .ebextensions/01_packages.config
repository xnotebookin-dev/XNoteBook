# .ebextensions/01_packages.config

commands:
  01_download_epel:
    # Download the EPEL 9 release package directly to bypass metadata trust issues
    command: "curl -L -o /tmp/epel-release-latest-9.noarch.rpm https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm"
  02_install_epel:
    # Install the downloaded RPM locally
    command: "sudo dnf install -y /tmp/epel-release-latest-9.noarch.rpm"
  03_install_tesseract:
    # Now that the repo is installed, install Tesseract with GPG check disabled for the build
    command: "sudo dnf install -y tesseract tesseract-devel tesseract-langpack-eng --nogpgcheck"

packages:
  yum:
    gcc: []
    gcc-c++: []
    python3-devel: []
    poppler-utils: []
    mesa-libGL: []
    libSM: []
    libXrender: []
    libXext: []