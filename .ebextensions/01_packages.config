# .ebextensions/01_packages.config

commands:
  01_enable_epel:
    # Enables the Extra Packages for Enterprise Linux (EPEL) repository
    # This is required because Tesseract is not in the default Amazon Linux repos
    command: "sudo amazon-linux-extras install epel -y"
  02_install_tesseract:
    # Manually ensuring tesseract is installed from the newly enabled repo
    command: "sudo yum install -y tesseract tesseract-devel"

packages:
  yum:
    # Compilers needed to build/install heavy Python wheels
    gcc: []
    gcc-c++: []
    python3-devel: []

    # PDF processing (Required for pdf2image)
    poppler-utils: []

    # Image/Vision libraries (Required for OpenCV)
    mesa-libGL: []
    libSM: []
    libXrender: []
    libXext: []

    # Tesseract OCR Engine (Engine and English language pack)
    tesseract: []
    tesseract-langpack-eng: []

    # Note: If you need additional languages, add them below:
    # tesseract-langpack-hin: [] # Hindi

    # OPTIONAL: Uncomment for Indian languages support
    # tesseract-langpack-hin: []     # Hindi
    # tesseract-langpack-tam: []     # Tamil
    # tesseract-langpack-kan: []     # Kannada
    # tesseract-langpack-tel: []     # Telugu
    # tesseract-langpack-ben: []     # Bengali
    # tesseract-langpack-mar: []     # Marathi
    # tesseract-langpack-guj: []     # Gujarati
    # tesseract-langpack-pan: []     # Punjabi
    # tesseract-langpack-ori: []     # Odia
    # tesseract-langpack-mal: []     # Malayalam

    # REMOVED: No longer needed for Tesseract (was for EasyOCR)
    # libgomp: []  # Parallel processing for PyTorch